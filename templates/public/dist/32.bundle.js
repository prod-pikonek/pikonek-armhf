(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1130:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),o=r(1085),c=r(1106),l=r(1086),u=r(1094),i=r(1081),s=(r(802),r(811)),f=r.n(s),p=r(671),y=r(193),m=r(812);function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"deleteReports",value:function(){return new Promise((function(e,t){y.a.http({url:m.a.REPORTS_URL}).DELETE.then((function(t){e(t.data)})).catch((function(e){t(e)}))}))}},{key:"getReports",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,r){y.a.http({url:m.a.REPORTS_URL+"?"+e}).GET.then((function(e){t(e.data)})).catch((function(e){r(e)}))}))}}])&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),h=r(797),v=r(99),g=r(984);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var a=_(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return k(this,r)}}function k(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}),D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(m,e);var t,r,n,s=S(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=s.call(this,e)).deleteReports=function(){f.a.fire({title:"Clear Sales",text:"Are you sure you want to clear the sales database? This cannot be undone.",confirmButtonText:"Yes",cancelButtonText:"No",showCancelButton:!0,showLoaderOnConfirm:!0,preConfirm:function(){return t.reportService.deleteReports().then((function(e){return e}))},allowOutsideClick:function(){return!f.a.isLoading()}}).then((function(e){e.isConfirmed&&(f.a.fire({text:e.value.message,icon:e.value.error?"error":"success"}),t.getReports())}))},t.reportService=new b,t.state={render:!0,query:{start:Object(h.a)(new Date,"yyyy-MM-dd"),end:Object(h.a)(Object(v.a)(new Date,{days:1}),"yyyy-MM-dd")},reports:{reports:[],total:0}},t}return t=m,(r=[{key:"renderDateFormat",value:function(e){if(e)return y.a.renderDateFormat(e)}},{key:"getReports",value:function(){var e=this;this.setState(E(E({},this.state),{},{render:!0}),(function(){var t=Object.keys(e.state.query).map((function(t){return t+"="+e.state.query[t]})).join("&");e.reportService.getReports(t).then((function(t){e.setState(E(E({},e.state),{},{reports:t.response,render:!1}))})).catch((function(e){console.error(e)}))}))}},{key:"componentDidMount",value:function(){this.getReports()}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"animated fadeIn"},a.a.createElement(p.z,null,a.a.createElement(p.h,{lg:12},a.a.createElement(o.a,null,a.a.createElement(c.a,null,"Sales Report"),a.a.createElement(l.a,null,a.a.createElement(p.z,null,a.a.createElement(p.h,{xs:8},a.a.createElement("div",null,a.a.createElement("h2",null,"Earnings: ",this.state.render?"Fetching data. Please wait...":this.state.reports.total?x.format(parseFloat(this.state.reports.total)):x.format(0)))),a.a.createElement(p.h,{xs:2},a.a.createElement("div",null,a.a.createElement(u.a,null,"Start"),a.a.createElement(g.Input,{type:"date",name:"range",defaultValue:new Date,onChange:function(t){e.setState(E(E({},e.state),{},{query:E(E({},e.state.query),{},{start:t.target.value})}),(function(){return e.getReports()}))}}))),a.a.createElement(p.h,{xs:2},a.a.createElement("div",null,a.a.createElement(u.a,null,"End"),a.a.createElement(g.Input,{type:"date",name:"range",defaultValue:new Date,onChange:function(t){e.setState(E(E({},e.state),{},{query:E(E({},e.state.query),{},{end:t.target.value})}),(function(){return e.getReports()}))}})))),a.a.createElement(p.k,{items:this.state.reports.reports,fields:[{key:"total_price",label:"Price",sorter:!1,filter:!0},{key:"interface",label:"Portal",sorter:!1,filter:!0},{key:"type",label:"Type",sorter:!1,filter:!0},{key:"created_at",label:"Date",sorter:!0,filter:!1}],columnFilter:!0,itemsPerPageSelect:!0,itemsPerPage:10,sorter:!0,pagination:!0,scopedSlots:{total_price:function(e,t){return a.a.createElement("td",{className:"text-left"},x.format(parseFloat(e.total_price)))},created_at:function(t,r){return a.a.createElement("td",{className:"text-left"},e.renderDateFormat(t.created_at))}}}),a.a.createElement(p.z,null,a.a.createElement(p.h,{lg:"12",className:"text-right"},a.a.createElement(i.a,{color:"danger",className:"px-4 text-right",onClick:function(t){return e.deleteReports()}},"Clear All")),a.a.createElement(p.h,{lg:"12",className:"text-right"})))))))}}])&&j(t.prototype,r),n&&j(t,n),Object.defineProperty(t,"prototype",{writable:!1}),m}(n.Component);t.default=D}}]);